/**
 * View Transitions API Styles
 * Beautiful, smooth page transitions using the View Transitions API
 * 
 * Browser Support: Chrome 111+, Edge 111+
 * Graceful degradation for unsupported browsers
 */

/* ============================================
   ROOT TRANSITION CONFIGURATION
   ============================================ */

:root {
  --transition-duration: 0.3s;
  --transition-easing: cubic-bezier(0.4, 0.0, 0.2, 1);
  --transition-easing-in: cubic-bezier(0.4, 0.0, 1, 1);
  --transition-easing-out: cubic-bezier(0.0, 0.0, 0.2, 1);
  --transition-slide-distance: 30px;
  --transition-scale-start: 0.95;
  --transition-blur-amount: 10px;
}

/* ============================================
   DEFAULT TRANSITION (FADE + SLIDE)
   ============================================ */

/* Outgoing page */
::view-transition-old(root) {
  animation: fade-out var(--transition-duration) var(--transition-easing) forwards,
             slide-out-left var(--transition-duration) var(--transition-easing) forwards;
}

/* Incoming page */
::view-transition-new(root) {
  animation: fade-in var(--transition-duration) var(--transition-easing) forwards,
             slide-in-right var(--transition-duration) var(--transition-easing) forwards;
}

/* ============================================
   SLIDE TRANSITIONS
   ============================================ */

/* Slide Left (Forward Navigation) */
[data-transition-type="slide"] ::view-transition-old(root) {
  animation: fade-out var(--transition-duration) var(--transition-easing) forwards,
             slide-out-left var(--transition-duration) var(--transition-easing) forwards;
}

[data-transition-type="slide"] ::view-transition-new(root) {
  animation: fade-in var(--transition-duration) var(--transition-easing) forwards,
             slide-in-right var(--transition-duration) var(--transition-easing) forwards;
}

/* Slide Right (Back Navigation) */
[data-transition-type="slide-reverse"] ::view-transition-old(root) {
  animation: fade-out var(--transition-duration) var(--transition-easing) forwards,
             slide-out-right var(--transition-duration) var(--transition-easing) forwards;
}

[data-transition-type="slide-reverse"] ::view-transition-new(root) {
  animation: fade-in var(--transition-duration) var(--transition-easing) forwards,
             slide-in-left var(--transition-duration) var(--transition-easing) forwards;
}

/* ============================================
   FADE TRANSITION
   ============================================ */

[data-transition-type="fade"] ::view-transition-old(root) {
  animation: fade-out var(--transition-duration) var(--transition-easing) forwards;
}

[data-transition-type="fade"] ::view-transition-new(root) {
  animation: fade-in var(--transition-duration) var(--transition-easing) forwards;
}

/* ============================================
   SCALE TRANSITION (ZOOM)
   ============================================ */

[data-transition-type="scale"] ::view-transition-old(root) {
  animation: fade-out var(--transition-duration) var(--transition-easing) forwards,
             scale-out var(--transition-duration) var(--transition-easing) forwards;
}

[data-transition-type="scale"] ::view-transition-new(root) {
  animation: fade-in var(--transition-duration) var(--transition-easing) forwards,
             scale-in var(--transition-duration) var(--transition-easing) forwards;
}

/* ============================================
   BLUR TRANSITION (ELEGANT DEPTH)
   ============================================ */

[data-transition-type="blur"] ::view-transition-old(root) {
  animation: fade-out var(--transition-duration) var(--transition-easing) forwards,
             blur-out var(--transition-duration) var(--transition-easing) forwards;
}

[data-transition-type="blur"] ::view-transition-new(root) {
  animation: fade-in var(--transition-duration) var(--transition-easing) forwards,
             blur-in var(--transition-duration) var(--transition-easing) forwards;
}

/* ============================================
   LIFT TRANSITION (MATERIAL DESIGN INSPIRED)
   ============================================ */

[data-transition-type="lift"] ::view-transition-old(root) {
  animation: fade-out var(--transition-duration) var(--transition-easing) forwards,
             lift-out var(--transition-duration) var(--transition-easing) forwards;
}

[data-transition-type="lift"] ::view-transition-new(root) {
  animation: fade-in var(--transition-duration) var(--transition-easing) forwards,
             lift-in var(--transition-duration) var(--transition-easing) forwards;
}

/* ============================================
   KEYFRAME ANIMATIONS
   ============================================ */

/* Fade Animations */
@keyframes fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Slide Animations */
@keyframes slide-out-left {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(-1 * var(--transition-slide-distance)));
  }
}

@keyframes slide-in-right {
  from {
    transform: translateX(var(--transition-slide-distance));
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slide-out-right {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(var(--transition-slide-distance));
  }
}

@keyframes slide-in-left {
  from {
    transform: translateX(calc(-1 * var(--transition-slide-distance)));
  }
  to {
    transform: translateX(0);
  }
}

/* Scale Animations */
@keyframes scale-out {
  from {
    transform: scale(1);
  }
  to {
    transform: scale(var(--transition-scale-start));
  }
}

@keyframes scale-in {
  from {
    transform: scale(var(--transition-scale-start));
  }
  to {
    transform: scale(1);
  }
}

/* Blur Animations */
@keyframes blur-out {
  from {
    filter: blur(0);
  }
  to {
    filter: blur(var(--transition-blur-amount));
  }
}

@keyframes blur-in {
  from {
    filter: blur(var(--transition-blur-amount));
  }
  to {
    filter: blur(0);
  }
}

/* Lift Animations (Vertical Movement) */
@keyframes lift-out {
  from {
    transform: translateY(0) scale(1);
  }
  to {
    transform: translateY(-20px) scale(0.95);
  }
}

@keyframes lift-in {
  from {
    transform: translateY(20px) scale(0.95);
  }
  to {
    transform: translateY(0) scale(1);
  }
}

/* ============================================
   ELEMENT-SPECIFIC TRANSITIONS
   ============================================ */

/* Header stays in place during transitions */
header {
  view-transition-name: header;
}

::view-transition-old(header),
::view-transition-new(header) {
  animation: none;
  mix-blend-mode: normal;
}

/* Footer stays in place during transitions */
footer {
  view-transition-name: footer;
}

::view-transition-old(footer),
::view-transition-new(footer) {
  animation: none;
  mix-blend-mode: normal;
}

/* Main content transitions */
main {
  view-transition-name: main-content;
}

/* Hero sections get special treatment */
.home-hero,
.case-studies-hero,
.portfolio-hero,
.articles-hero {
  view-transition-name: hero;
}

::view-transition-old(hero),
::view-transition-new(hero) {
  animation-duration: calc(var(--transition-duration) * 1.2);
}

/* Cards get individual transitions */
.card {
  view-transition-name: none; /* Prevent individual card transitions by default */
}

/* Featured cards can have their own transition */
.card.featured {
  view-transition-name: var(--card-transition-name, none);
}

/* ============================================
   LOADING STATE
   ============================================ */

/* Show loading indicator during transition */
::view-transition-group(root) {
  animation-timing-function: var(--transition-easing);
}

/* Smooth transition between old and new content */
::view-transition-image-pair(root) {
  isolation: isolate;
}

/* ============================================
   ACCESSIBILITY & PERFORMANCE
   ============================================ */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(root),
  ::view-transition-new(root),
  ::view-transition-old(header),
  ::view-transition-new(header),
  ::view-transition-old(footer),
  ::view-transition-new(footer),
  ::view-transition-old(hero),
  ::view-transition-new(hero),
  ::view-transition-old(main-content),
  ::view-transition-new(main-content) {
    animation: none !important;
  }

  :root {
    --transition-duration: 0.01s;
  }
}

/* ============================================
   FALLBACK FOR UNSUPPORTED BROWSERS
   ============================================ */

/* Add subtle fade for browsers without View Transitions API */
.view-transitions-not-supported body {
  transition: opacity 0.2s ease-in-out;
}

.view-transitions-not-supported body.page-transitioning {
  opacity: 0.7;
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Prevent specific elements from transitioning */
.no-transition {
  view-transition-name: none !important;
}

/* Force element to transition independently */
.transition-independent {
  view-transition-name: var(--element-id);
}

/* Transition loading state */
.transition-loading {
  cursor: wait;
  pointer-events: none;
}

/* ============================================
   DARK MODE ADJUSTMENTS
   ============================================ */

.theme-dark ::view-transition-old(root),
.theme-dark ::view-transition-new(root) {
  /* Slightly longer transitions in dark mode for smoother feel */
  animation-duration: calc(var(--transition-duration) * 1.1);
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
   ============================================ */

/* Faster transitions on mobile for better performance */
@media (max-width: 768px) {
  :root {
    --transition-duration: 0.2s;
    --transition-slide-distance: 20px;
  }
}

/* Richer transitions on larger screens */
@media (min-width: 1200px) {
  :root {
    --transition-duration: 0.35s;
    --transition-slide-distance: 40px;
  }
}

/* ============================================
   DEBUG MODE
   ============================================ */

/* Visual indicator when transitions are active (for debugging) */
[data-view-transitions-debug="true"] ::view-transition-group(root) {
  outline: 2px solid red;
}

[data-view-transitions-debug="true"] ::view-transition-old(root) {
  outline: 2px solid blue;
}

[data-view-transitions-debug="true"] ::view-transition-new(root) {
  outline: 2px solid green;
}
