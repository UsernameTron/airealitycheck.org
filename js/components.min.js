const ComponentConfig={paths:{header:"components/header.html",footer:"components/footer.html",metaTags:"components/meta-tags.html"},placeholders:{header:"header-placeholder",footer:"footer-placeholder",metaTags:"meta-tags-placeholder"},fallbacks:{header:'<header class="error-header"><div class="container"><a href="/" class="logo">AI Reality Check</a></div></header>',footer:'<footer class="error-footer"><div class="container"><p>&copy; 2025 AI Reality Check</p></div></footer>',metaTags:'<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="css/style.min.css">'}};document.addEventListener("DOMContentLoaded",function(){let totalComponents=0;const headerPlaceholder=document.getElementById(ComponentConfig.placeholders.header);const footerPlaceholder=document.getElementById(ComponentConfig.placeholders.footer);const metaTagsPlaceholder=document.getElementById(ComponentConfig.placeholders.metaTags);if(headerPlaceholder)totalComponents++;if(footerPlaceholder)totalComponents++;if(metaTagsPlaceholder)totalComponents++;window.componentLoadingStatus={total:totalComponents,loaded:0,failed:0,errors:[]};if(metaTagsPlaceholder){loadComponent(ComponentConfig.placeholders.metaTags,ComponentConfig.paths.metaTags,ComponentConfig.fallbacks.metaTags);}if(headerPlaceholder){setTimeout(()=>{loadComponent(ComponentConfig.placeholders.header,ComponentConfig.paths.header,ComponentConfig.fallbacks.header);},10);}if(footerPlaceholder){setTimeout(()=>{loadComponent(ComponentConfig.placeholders.footer,ComponentConfig.paths.footer,ComponentConfig.fallbacks.footer);},20);}});function loadComponent(placeholderId,componentPath,fallbackHtml){const placeholder=document.getElementById(placeholderId);if(!placeholder){logComponentError("Placeholder not found",placeholderId,componentPath);return;}placeholder.innerHTML='<div class="component-loading">Loading component...</div>';const rootPath=getPathToRoot();const fullPath=rootPath+componentPath;const timeoutDuration=5000;const timeout=setTimeout(()=>{handleComponentError(new Error(`Timeout loading component: ${componentPath}`),placeholder,fallbackHtml,placeholderId,componentPath);},timeoutDuration);fetch(fullPath).then(response=>{clearTimeout(timeout);if(!response.ok){throw new Error(`Failed to load component: ${response.status} ${response.statusText}`);}return response.text();}).then(html=>{const currentPath=window.location.pathname;const pageTitle=window.PAGE_TITLE||document.title||"AI Reality Check";const pageDescription=window.PAGE_DESCRIPTION||(document.querySelector('meta[name="description"]')?.content)||"AI Reality Check - Practical AI solutions for business";const relPath=window.REL_PATH||rootPath||"./";const canonicalPath=window.CANONICAL_PATH||currentPath||"/";html=html.replace(/\{\{PAGE_TITLE\}\}/g,pageTitle);html=html.replace(/\{\{PAGE_DESCRIPTION\}\}/g,pageDescription);html=html.replace(/\{\{REL_PATH\}\}/g,relPath);html=html.replace(/\{\{CANONICAL_PATH\}\}/g,canonicalPath);html=html.replace(/\[ROOT_URL\]/g,relPath);html=html.replace(/\[CURRENT_PATH\]/g,canonicalPath);html=html.replace(/\[PAGE_TITLE\]/g,pageTitle);html=html.replace(/\[PAGE_DESCRIPTION\]/g,pageDescription);placeholder.innerHTML=html;window.componentLoadingStatus.loaded++;if(placeholderId===ComponentConfig.placeholders.header){if(typeof initMobileNav==="function"){try{initMobileNav();}catch(error){console.warn("Error initializing mobile navigation:",error);}}if(typeof highlightCurrentPage==="function"){try{highlightCurrentPage();}catch(error){console.warn("Error highlighting current page:",error);}}}}).catch(error=>{clearTimeout(timeout);handleComponentError(error,placeholder,fallbackHtml,placeholderId,componentPath);});}function handleComponentError(error,placeholder,fallbackHtml,placeholderId,componentPath){logComponentError(error.message,placeholderId,componentPath);window.componentLoadingStatus.failed++;window.componentLoadingStatus.errors.push({component:placeholderId,path:componentPath,error:error.message});if(fallbackHtml&&placeholder){placeholder.innerHTML=fallbackHtml;}else if(placeholder){placeholder.innerHTML='<div class="component-error">Component could not be loaded</div>';}document.body.classList.add("component-load-error");}function logComponentError(message,placeholderId,componentPath){console.error(`Component Error [${placeholderId}]: ${message}`,`\nComponent Path: ${componentPath}`,`\nPage URL: ${window.location.href}`);}function getPathToRoot(){let path=window.location.pathname;if(!path.endsWith("/")&&!path.endsWith(".html")){path+="/";}const segments=path.split("/").filter(segment=>segment.length>0);if(segments.length===0){return"";}if(segments.length===1&&segments[0].endsWith(".html")){return"";}let depth=segments.length;if(segments.length>0&&segments[segments.length-1].endsWith(".html")){depth--;}let rootPath="";for(let i=0;i<depth;i++){rootPath+="../";}return rootPath;}